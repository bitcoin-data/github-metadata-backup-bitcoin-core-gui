{
  "type": "issue",
  "issue": {
    "id": 3738712443,
    "node_id": "I_kwDOEEET9c7e2Dl7",
    "url": "https://api.github.com/repos/bitcoin-core/gui/issues/918",
    "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
    "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918/events",
    "html_url": "https://github.com/bitcoin-core/gui/issues/918",
    "number": 918,
    "state": "open",
    "state_reason": null,
    "title": "GUI crashes on startup after creating a wallet previously",
    "body": "### Is there an existing issue for this?\n\n- [x] I have searched the existing issues\n\n### Current behaviour\n\n_Note: The issue is present in testnet too, not only regtest._\n\nThe GUI crashes in regtest immediately on start. It did work once initially but has been crashing since, tried quite a few times.\n\n### Expected behaviour\n\nThe GUI should not crash in regtest, just like it doesn't in main or test environments.\n\n### Steps to reproduce\n\nRegtest conf file to use:\n```zsh\n➜  Bitcoin cat $BITCOIN_DATA_DIR/bitcoin-reg.conf\nregtest=1\n[regtest]\nport=28333\nrpcport=28332\nrpcuser=test\nrpcpassword=test\nbind=127.0.0.1:28334\nbind=127.0.0.1:28335=onion\n```\n\nNew data directory setup:\n```zsh\n➜  ~ mkdir /tmp/gui-node-1\n➜  ~ cp $BITCOIN_DATA_DIR/bitcoin-reg.conf /tmp/gui-node-1\n➜  ~ cd /tmp/gui-node-1\n➜  gui-node-1 l\ntotal 8\ndrwxr-xr-x   3 rkrux  wheel    96B Dec 19 15:48 .\ndrwxrwxrwt  10 root    wheel   320B Dec 19 15:46 ..\n-rw-r--r--   1 rkrux  wheel   123B Dec 19 15:48 bitcoin-reg.conf\n```\n\nRun GUI (bitcoin-qt): Works first time, no wallet right now.\n```zsh\n➜  ~ $BITCOIN_BUILD_BIN_DIR/bitcoin-qt -datadir=/tmp/gui-node-1 -conf=/tmp/gui-node-1/bitcoin-reg.conf\n```\n\nCreate a wallet within the GUI (wallet name eg: gui-node-wallet) and close the GUI. \n\nRun GUI (bitcoin-qt) again - fails now with the below error:\n```zsh\n➜  ~ $BITCOIN_BUILD_BIN_DIR/bitcoin-qt -datadir=/tmp/gui-node-1 -conf=/tmp/gui-node-1/bitcoin-reg.conf\nError: SQLiteDatabase: Failed to configure serialized threading mode: bad parameter or other API misuse\n```\n\nData directory state now:\n```zsh\n➜  gui-node-1 l /tmp/gui-node-1\ntotal 8\ndrwxr-xr-x   4 rkrux  wheel   128B Dec 19 16:08 .\ndrwxrwxrwt  10 root    wheel   320B Dec 19 16:07 ..\n-rw-r--r--   1 rkrux  wheel   123B Dec 19 16:07 bitcoin-reg.conf\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 regtest\n➜  gui-node-1 l /tmp/gui-node-1/regtest/\ntotal 600\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 .\ndrwxr-xr-x   4 rkrux  wheel   128B Dec 19 16:08 ..\n-rw-------   1 rkrux  wheel     0B Dec 19 16:08 .lock\n-rw-------   1 rkrux  wheel    37B Dec 19 16:11 anchors.dat\n-rw-------   1 rkrux  wheel   221B Dec 19 16:08 banlist.json\ndrwx------   7 rkrux  wheel   224B Dec 19 16:08 blocks\ndrwx------   7 rkrux  wheel   224B Dec 19 16:10 chainstate\n-rw-------   1 rkrux  wheel    18K Dec 19 16:11 debug.log\n-rw-------   1 rkrux  wheel   242K Dec 19 16:11 fee_estimates.dat\n-rw-------   1 rkrux  wheel    27B Dec 19 16:11 mempool.dat\n-rw-------   1 rkrux  wheel   4.1K Dec 19 16:11 peers.dat\n-rw-------   1 rkrux  wheel   242B Dec 19 16:11 settings.json\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 wallets\n➜  gui-node-1 l /tmp/gui-node-1/regtest/wallets\ntotal 0\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 .\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 ..\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 gui-node-wallet\n➜  gui-node-1 l /tmp/gui-node-1/regtest/wallets/gui-node-wallet\ntotal 48\ndrwx------  3 rkrux  wheel    96B Dec 19 16:11 .\ndrwx------  3 rkrux  wheel    96B Dec 19 16:11 ..\n-rw-------  1 rkrux  wheel    24K Dec 19 16:11 wallet.dat\n```\n\n### Relevant log output\n\n```zsh\n2025-12-19T10:48:12Z Using data directory /tmp/gui-node-1/regtest\n2025-12-19T10:48:12Z Config file: /tmp/gui-node-1/bitcoin-reg.conf\n2025-12-19T10:48:12Z Config file arg: regtest=\"1\"\n2025-12-19T10:48:12Z Config file arg: [regtest] bind=\"127.0.0.1:28334\"\n2025-12-19T10:48:12Z Config file arg: [regtest] bind=\"127.0.0.1:28335=onion\"\n2025-12-19T10:48:12Z Config file arg: [regtest] port=\"28333\"\n2025-12-19T10:48:12Z Config file arg: [regtest] rpcpassword=****\n2025-12-19T10:48:12Z Config file arg: [regtest] rpcport=\"28332\"\n2025-12-19T10:48:12Z Config file arg: [regtest] rpcuser=****\n2025-12-19T10:48:12Z Setting file arg: wallet = [\"gui-node-wallet\"]\n2025-12-19T10:48:12Z Command-line arg: conf=\"/tmp/gui-node-1/bitcoin-reg.conf\"\n2025-12-19T10:48:12Z Command-line arg: datadir=\"/tmp/gui-node-1\"\n2025-12-19T10:48:12Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-12-19T10:48:12Z scheduler thread start\n2025-12-19T10:48:12Z Using wallet directory /tmp/gui-node-1/regtest/wallets\n2025-12-19T10:48:12Z Using SQLite Version 3.43.2\n2025-12-19T10:48:12Z init message: Verifying wallet(s)…\n2025-12-19T10:48:12Z [warning] SQLite Error. Code: 21. Message: misuse at line 185687 of [1b37c146ee]\n2025-12-19T10:48:12Z [error] SQLiteDatabase: Failed to configure serialized threading mode: bad parameter or other API misuse\n\n2025-12-19T10:48:14Z Shutdown in progress...\n2025-12-19T10:48:14Z scheduler thread exit\n2025-12-19T10:48:14Z Shutdown done\n```\n\n### How did you obtain Bitcoin Core\n\nCompiled from source\n\n### What version of Bitcoin Core are you using?\n\nmaster@13891a8a685d255cb13dd5018e3d5ccc18b07c34\n\n### Operating system and version\n\nMacOS Sequoia (15.4)\n\n### Machine specifications\n\n_No response_",
    "user": {
      "login": "rkrux",
      "id": 5960750,
      "node_id": "MDQ6VXNlcjU5NjA3NTA=",
      "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rkrux",
      "html_url": "https://github.com/rkrux",
      "followers_url": "https://api.github.com/users/rkrux/followers",
      "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
      "organizations_url": "https://api.github.com/users/rkrux/orgs",
      "repos_url": "https://api.github.com/users/rkrux/repos",
      "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/rkrux/received_events",
      "type": "User",
      "site_admin": false,
      "name": null,
      "patch_url": null
    },
    "labels": [
      {
        "id": 2452934032,
        "node_id": "MDU6TGFiZWwyNDUyOTM0MDMy",
        "url": "https://api.github.com/repos/bitcoin-core/gui/labels/macOS",
        "name": "macOS",
        "description": "",
        "color": "551189",
        "default": false
      },
      {
        "id": 2927906211,
        "node_id": "MDU6TGFiZWwyOTI3OTA2MjEx",
        "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Wallet",
        "name": "Wallet",
        "description": "",
        "color": "08a781",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 19,
    "created_at": "2025-12-17T12:31:20Z",
    "updated_at": "2025-12-24T10:24:19Z"
  },
  "events": [
    {
      "event": "commented",
      "id": 3665898521,
      "node_id": "IC_kwDOEEET9c7agSwZ",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3665898521",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T15:32:53Z",
      "updated_at": "2025-12-17T15:32:53Z",
      "author_association": "MEMBER",
      "body": "Can you check the directory permissions please",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3665898521",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "labeled",
      "id": 21624230176,
      "node_id": "LE_lADOEEET9c7e2Dl7zwAAAAUI55Eg",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21624230176",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T18:27:57Z",
      "label": {
        "name": "macOS",
        "color": "551189"
      }
    },
    {
      "event": "labeled",
      "id": 21624248267,
      "node_id": "LE_lADOEEET9c7e2Dl7zwAAAAUI59fL",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21624248267",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T18:28:56Z",
      "label": {
        "name": "Wallet",
        "color": "08a781"
      }
    },
    {
      "event": "commented",
      "id": 3666633855,
      "node_id": "IC_kwDOEEET9c7ajGR_",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3666633855",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-17T18:29:27Z",
      "updated_at": "2025-12-17T18:29:27Z",
      "author_association": "CONTRIBUTOR",
      "body": "Is this really gui-specific? Does it not happen with `bitcoind`?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3666633855",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3669679934,
      "node_id": "IC_kwDOEEET9c7aut8-",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3669679934",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T10:53:32Z",
      "updated_at": "2025-12-18T10:55:57Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Is this really gui-specific? Does it not happen with bitcoind?\n\nYes, it seems to be GUI specific, and doesn't happen with bitcoind alone.\n\n> Can you check the directory permissions please\n\nI did and noticed that the regtest and testnet subdirectories didn't have the r|x permissions for group and others, unlike the data directory. I gave those permissions to them but I don't believe it was the issue - when I was looking into the directory permissions, I also noticed that one regtest subdirectory was present within the regtest subdirectory. I rm-rf'ed it and ran the GUI again, it worked then.\n\nHowever, the GUI seems to be creating this additional subdirectory every time it is run, and I have to delete it every time, otherwise the same error pops up. If I run the GUI without the `-walletdir` argument so that the additional subdirectory is not created, the GUI runs but it is not able to find the already present wallets that I have in regtest, so this argument seems necessary to me, but at the cost of deleting the additional subdirectory after the next run.\n",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3669679934",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3669714977,
      "node_id": "IC_kwDOEEET9c7au2gh",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3669714977",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T11:00:43Z",
      "updated_at": "2025-12-18T11:00:43Z",
      "author_association": "CONTRIBUTOR",
      "body": "I don't think `datadir` is supposed to include the `regtest` portion?\n\nOtherwise, the dir structure will end with `regtest/regtest`, no?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3669714977",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3669746699,
      "node_id": "IC_kwDOEEET9c7au-QL",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3669746699",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T11:05:59Z",
      "updated_at": "2025-12-18T11:05:59Z",
      "author_association": "CONTRIBUTOR",
      "body": "At least that is what I get when running:\n\n```\n$ ./bld-cmake/bin/bitcoin-qt -regtest -datadir=/tmp/regtest/ -printtoconsole | grep 'Using data'\n2025-12-18T11:03:50Z Using data directory /tmp/regtest/regtest\n```\n\nYou are setting regtest in the conf file, so that is different, and it may be good to check what the expected interaction is there:\n\n```\n2025-12-17T10:22:16Z Default data directory /Users/rkrux/Library/Application Support/Bitcoin\n2025-12-17T10:22:16Z Using data directory /Users/rkrux/Library/Application Support/Bitcoin/regtest\n2025-12-17T10:22:16Z Config file: /Users/rkrux/Library/ApplicationSupport/Bitcoin/bitcoin-reg.conf\n2025-12-17T10:22:16Z Config file arg: regtest=\"1\"",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3669746699",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3669772191,
      "node_id": "IC_kwDOEEET9c7avEef",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3669772191",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T11:10:44Z",
      "updated_at": "2025-12-18T11:11:06Z",
      "author_association": "CONTRIBUTOR",
      "body": "> I don't think datadir is supposed to include the regtest portion?\n\nIf I run without the regtest portion, I get the same error. If I run without it and without the `-walletdir` as well, then too the same error.\nI suspect that the GUI always tries to create the regtest subdirectory and errors out if it's already present - at least with my combination of the arguments and configuration file.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3669772191",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3669785378,
      "node_id": "IC_kwDOEEET9c7avHsi",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3669785378",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T11:14:03Z",
      "updated_at": "2025-12-18T11:14:03Z",
      "author_association": "CONTRIBUTOR",
      "body": "From the debug log:\n\n```\n2025-12-18T11:05:02Z Default data directory /Users/rkrux/Library/Application Support/Bitcoin\n2025-12-18T11:05:02Z Using data directory /Users/rkrux/Library/ApplicationSupport/Bitcoin/regtest/regtest\n2025-12-18T11:05:02Z Config file: /Users/rkrux/Library/ApplicationSupport/Bitcoin/bitcoin-reg.conf\n2025-12-18T11:05:02Z Config file arg: regtest=\"1\"\n2025-12-18T11:05:02Z Config file arg: [regtest] bind=\"127.0.0.1:28334\"\n2025-12-18T11:05:02Z Config file arg: [regtest] bind=\"127.0.0.1:28335=onion\"\n2025-12-18T11:05:02Z Config file arg: [regtest] port=\"28333\"\n2025-12-18T11:05:02Z Config file arg: [regtest] rpcpassword=****\n2025-12-18T11:05:02Z Config file arg: [regtest] rpcport=\"28332\"\n2025-12-18T11:05:02Z Config file arg: [regtest] rpcuser=****\n2025-12-18T11:05:02Z Command-line arg: conf=\"/Users/rkrux/Library/ApplicationSupport/Bitcoin/bitcoin-reg.conf\"\n2025-12-18T11:05:02Z Command-line arg: datadir=\"/Users/rkrux/Library/ApplicationSupport/Bitcoin/regtest\"\n2025-12-18T11:05:02Z Command-line arg: walletdir=\"/Users/rkrux/Library/ApplicationSupport/Bitcoin/regtest/wallets\"\n2025-12-18T11:05:02Z Using at most 125 automatic connections (1024 file descriptors available)\n2025-12-18T11:05:02Z scheduler thread start\n2025-12-18T11:05:02Z Using wallet directory /Users/rkrux/Library/Application Support/Bitcoin/regtest/wallets\n2025-12-18T11:05:02Z Using SQLite Version 3.43.2\n2025-12-18T11:05:02Z init message: Verifying wallet(s)…\n2025-12-18T11:05:02Z Using /16 prefix for IP bucketing\n2025-12-18T11:05:02Z init message: Loading P2P addresses…\n```",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3669785378",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3670243771,
      "node_id": "IC_kwDOEEET9c7aw3m7",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3670243771",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-18T13:13:56Z",
      "updated_at": "2025-12-18T13:13:56Z",
      "author_association": "CONTRIBUTOR",
      "body": "Actually, parsing the conf file should clear the old/stale datadir value:\n\n```\nsrc/common/config.cpp-    // If datadir is changed in .conf file:\nsrc/common/config.cpp:    ClearPathCache();\nsrc/common/config.cpp-    if (!CheckDataDirOption(*this)) {\nsrc/common/config.cpp-        error = strprintf(\"specified data directory \\\"%s\\\" does not exist.\", GetArg(\"-datadir\", \"\"));\nsrc/common/config.cpp-        return false;\nsrc/common/config.cpp-    }\n```\n\nCan you reproduce this on Linux?",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3670243771",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3674369168,
      "node_id": "IC_kwDOEEET9c7bAmyQ",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3674369168",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T09:57:31Z",
      "updated_at": "2025-12-19T09:57:31Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Can you reproduce this on Linux?\n\nSorry, I don't have access to a Linux machine.\n\n> You are setting regtest in the conf file, so that is different, and it may be good to check what the expected interaction is there:\n\nI will spend some time checking the expected interaction.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3674369168",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3674403414,
      "node_id": "IC_kwDOEEET9c7bAvJW",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3674403414",
      "actor": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T10:05:36Z",
      "updated_at": "2025-12-19T10:05:36Z",
      "author_association": "CONTRIBUTOR",
      "body": "> > Can you reproduce this on Linux?\n> \n> Sorry, I don't have access to a Linux machine.\n\nFair. It may be possible to install a Linux VM, but this may be tedious.\n\nAnother thing could be to create exact steps to reproduce, starting from a fresh folder:\n\n```\nmkdir new_datadir\necho 'regtest=1' > conf\n...\n```\n\nThis way, other devs on macOS can try to reproduce it.",
      "user": {
        "login": "maflcko",
        "id": 6399679,
        "node_id": "MDQ6VXNlcjYzOTk2Nzk=",
        "avatar_url": "https://avatars.githubusercontent.com/u/6399679?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/maflcko",
        "html_url": "https://github.com/maflcko",
        "followers_url": "https://api.github.com/users/maflcko/followers",
        "following_url": "https://api.github.com/users/maflcko/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/maflcko/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/maflcko/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/maflcko/subscriptions",
        "organizations_url": "https://api.github.com/users/maflcko/orgs",
        "repos_url": "https://api.github.com/users/maflcko/repos",
        "events_url": "https://api.github.com/users/maflcko/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/maflcko/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3674403414",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3674580903,
      "node_id": "IC_kwDOEEET9c7bBaen",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3674580903",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T10:49:17Z",
      "updated_at": "2025-12-19T10:51:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "> Another thing could be to create exact steps to reproduce, starting from a fresh folder:\n\nGood idea - done, helped me in understanding the issue from scratch. Also, updating the issue description with these steps.\n\nRegtest conf file to use:\n```zsh\n➜  Bitcoin cat $BITCOIN_DATA_DIR/bitcoin-reg.conf\nregtest=1\n[regtest]\nport=28333\nrpcport=28332\nrpcuser=test\nrpcpassword=test\nbind=127.0.0.1:28334\nbind=127.0.0.1:28335=onion\n```\n\nNew data directory setup:\n```zsh\n➜  ~ mkdir /tmp/gui-node-1\n➜  ~ cp $BITCOIN_DATA_DIR/bitcoin-reg.conf /tmp/gui-node-1\n➜  ~ cd /tmp/gui-node-1\n➜  gui-node-1 l\ntotal 8\ndrwxr-xr-x   3 rkrux  wheel    96B Dec 19 15:48 .\ndrwxrwxrwt  10 root    wheel   320B Dec 19 15:46 ..\n-rw-r--r--   1 rkrux  wheel   123B Dec 19 15:48 bitcoin-reg.conf\n```\n\nRun GUI (bitcoin-qt): Works first time, no wallet right now.\n```zsh\n➜  ~ $BITCOIN_BUILD_BIN_DIR/bitcoin-qt -datadir=/tmp/gui-node-1 -conf=/tmp/gui-node-1/bitcoin-reg.conf\n```\n\nCreate a wallet within the GUI (wallet name eg: gui-node-wallet) and close the GUI. \n\nRun GUI (bitcoin-qt) again - fails now with the below error:\n```zsh\n➜  ~ $BITCOIN_BUILD_BIN_DIR/bitcoin-qt -datadir=/tmp/gui-node-1 -conf=/tmp/gui-node-1/bitcoin-reg.conf\nError: SQLiteDatabase: Failed to configure serialized threading mode: bad parameter or other API misuse\n```\n\nData directory state now:\n```zsh\n➜  gui-node-1 l /tmp/gui-node-1\ntotal 8\ndrwxr-xr-x   4 rkrux  wheel   128B Dec 19 16:08 .\ndrwxrwxrwt  10 root    wheel   320B Dec 19 16:07 ..\n-rw-r--r--   1 rkrux  wheel   123B Dec 19 16:07 bitcoin-reg.conf\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 regtest\n➜  gui-node-1 l /tmp/gui-node-1/regtest/\ntotal 600\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 .\ndrwxr-xr-x   4 rkrux  wheel   128B Dec 19 16:08 ..\n-rw-------   1 rkrux  wheel     0B Dec 19 16:08 .lock\n-rw-------   1 rkrux  wheel    37B Dec 19 16:11 anchors.dat\n-rw-------   1 rkrux  wheel   221B Dec 19 16:08 banlist.json\ndrwx------   7 rkrux  wheel   224B Dec 19 16:08 blocks\ndrwx------   7 rkrux  wheel   224B Dec 19 16:10 chainstate\n-rw-------   1 rkrux  wheel    18K Dec 19 16:11 debug.log\n-rw-------   1 rkrux  wheel   242K Dec 19 16:11 fee_estimates.dat\n-rw-------   1 rkrux  wheel    27B Dec 19 16:11 mempool.dat\n-rw-------   1 rkrux  wheel   4.1K Dec 19 16:11 peers.dat\n-rw-------   1 rkrux  wheel   242B Dec 19 16:11 settings.json\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 wallets\n➜  gui-node-1 l /tmp/gui-node-1/regtest/wallets\ntotal 0\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 .\ndrwx------  13 rkrux  wheel   416B Dec 19 16:11 ..\ndrwx------   3 rkrux  wheel    96B Dec 19 16:11 gui-node-wallet\n➜  gui-node-1 l /tmp/gui-node-1/regtest/wallets/gui-node-wallet\ntotal 48\ndrwx------  3 rkrux  wheel    96B Dec 19 16:11 .\ndrwx------  3 rkrux  wheel    96B Dec 19 16:11 ..\n-rw-------  1 rkrux  wheel    24K Dec 19 16:11 wallet.dat\n```",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3674580903",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3674590711,
      "node_id": "IC_kwDOEEET9c7bBc33",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3674590711",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-19T10:52:47Z",
      "updated_at": "2025-12-19T10:52:47Z",
      "author_association": "CONTRIBUTOR",
      "body": "In the above experiment, I didn't try changing the data dir or adding the walletdir arg so that the issue is apparent with only one set of arguments and dirs. That's why I believe there is no additional regtest subdirectory created.",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3674590711",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3677914960,
      "node_id": "IC_kwDOEEET9c7bOIdQ",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3677914960",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T15:51:48Z",
      "updated_at": "2025-12-20T15:58:06Z",
      "author_association": "MEMBER",
      "body": "@rkrux, I haven't been able to reproduce it, but have an idea of what might be happening. Please try this branch: https://github.com/furszy/bitcoin-core/tree/2025_wallet_db_config_engine and let me know if the issue still occurs. Will rework the fix properly and detail the scenario.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3677914960",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "mentioned",
      "id": 21685412971,
      "node_id": "MEE_lADOEEET9c7e2Dl7zwAAAAUMjSRr",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21685412971",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T15:52:31Z"
    },
    {
      "event": "subscribed",
      "id": 21685412976,
      "node_id": "SE_lADOEEET9c7e2Dl7zwAAAAUMjSRw",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21685412976",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-20T15:52:31Z"
    },
    {
      "event": "commented",
      "id": 3681260524,
      "node_id": "IC_kwDOEEET9c7ba5Ps",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3681260524",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T09:43:48Z",
      "updated_at": "2025-12-22T10:13:38Z",
      "author_association": "CONTRIBUTOR",
      "body": "@furszy Thanks for looking into this, I applied the diff in this commit https://github.com/furszy/bitcoin-core/commit/f01a007ace2190be595d852e522544ba4035de4c like below:\n\n```diff\ndiff --git a/src/wallet/load.cpp b/src/wallet/load.cpp\nindex 84ee9cf10b..2135d21771 100644\n--- a/src/wallet/load.cpp\n+++ b/src/wallet/load.cpp\n@@ -51,8 +51,6 @@ bool VerifyWallets(WalletContext& context)\n     }\n \n     LogInfo(\"Using wallet directory %s\", fs::PathToString(GetWalletDir()));\n-    // Print general DB information\n-    LogDBInfo();\n \n     chain.initMessage(_(\"Verifying wallet(s)…\"));\n \ndiff --git a/src/wallet/sqlite.cpp b/src/wallet/sqlite.cpp\nindex e72455a3be..f86db90bca 100644\n--- a/src/wallet/sqlite.cpp\n+++ b/src/wallet/sqlite.cpp\n@@ -132,6 +132,11 @@ SQLiteDatabase::SQLiteDatabase(const fs::path& dir_path, const fs::path& file_pa\n         if (ret != SQLITE_OK) {\n             throw std::runtime_error(strprintf(\"SQLiteDatabase: Failed to initialize SQLite: %s\\n\", sqlite3_errstr(ret)));\n         }\n+\n+        static std::once_flag flag_version;\n+        std::call_once(flag_version, []() {\n+            LogInfo(\"Using SQLite Version %s\", SQLiteDatabaseVersion());\n+        });\n     }\n \n     try {\n(END)\n```\n\nThe error still persists. One thing that I noted earlier and now too is that even while creating the wallet first time, this error is thrown but the GUI doesn't crash. However, upon retrying the creation, the error goes away and the wallet is created. But, later upon restarting the GUI the error is thrown again, crashing the GUI.\n\n<img width=\"1373\" height=\"825\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/05b12117-9be8-48b8-875d-50455e15663e\" />",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3681260524",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "mentioned",
      "id": 21700879775,
      "node_id": "MEE_lADOEEET9c7e2Dl7zwAAAAUNeSWf",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21700879775",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T09:43:50Z"
    },
    {
      "event": "subscribed",
      "id": 21700879802,
      "node_id": "SE_lADOEEET9c7e2Dl7zwAAAAUNeSW6",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21700879802",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T09:43:50Z"
    },
    {
      "event": "commented",
      "id": 3682390048,
      "node_id": "IC_kwDOEEET9c7bfNAg",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3682390048",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T14:49:49Z",
      "updated_at": "2025-12-22T14:49:49Z",
      "author_association": "MEMBER",
      "body": "@rkrux, I assume you can avoid the crash after migration with the following patch:\n\n```diff\ndiff --git a/src/qt/walletcontroller.cpp b/src/qt/walletcontroller.cpp\n--- a/src/qt/walletcontroller.cpp\t(revision 7f295e1d9b44c225c823242c1f04239f46fb27a6)\n+++ b/src/qt/walletcontroller.cpp\t(date 1766414694786)\n@@ -461,7 +461,11 @@\n             if (res->solvables_wallet_name) {\n                 m_success_message += QChar(' ') + tr(\"Solvable but not watched scripts have been migrated to a new wallet named '%1'.\").arg(GUIUtil::HtmlEscape(GUIUtil::WalletDisplayName(res->solvables_wallet_name.value())));\n             }\n-            m_wallet_model = m_wallet_controller->getOrCreateWallet(std::move(res->wallet));\n+            if (!res->wallet) {\n+                m_error_message = _(\"Null main wallet output from migration\");\n+            } else {\n+                m_wallet_model = m_wallet_controller->getOrCreateWallet(std::move(res->wallet));\n+            }\n         } else {\n             m_error_message = util::ErrorString(res);\n         }\n```\n\n----------------------------------------\n\nYet, this is not a solution. It would only tell us that migration returns an invalid main wallet, which shouldn’t happen. Still, it would give us more information to investigate. Please run it and let me know.",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3682390048",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "mentioned",
      "id": 21706357276,
      "node_id": "MEE_lADOEEET9c7e2Dl7zwAAAAUNzLoc",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21706357276",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T14:49:51Z"
    },
    {
      "event": "subscribed",
      "id": 21706357298,
      "node_id": "SE_lADOEEET9c7e2Dl7zwAAAAUNzLoy",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21706357298",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T14:49:51Z"
    },
    {
      "event": "commented",
      "id": 3683871678,
      "node_id": "IC_kwDOEEET9c7bk2u-",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3683871678",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-22T19:37:08Z",
      "updated_at": "2025-12-22T19:37:08Z",
      "author_association": "MEMBER",
      "body": "A part from what I wrote above, check the following branch and let me know how it goes:\nhttps://github.com/furszy/bitcoin-core/tree/2025_wallet_decouple_db_config \n\nThese one should fix the initialization ordering issue (if that is the cause of the crash).\n\nNote: instead of copy pasting the diff as you did above, could fetch from my branch:\n```\ngit remote add furszy https://github.com/furszy/bitcoin-core.git\ngit fetch furszy 2025_wallet_decouple_db_config \ngit cherry-pick 0554fb96e5a25e36940f0fedcfbb0009c1808e84\ngit cherry-pick 1457479b43377713f9db9dc654f68b7efdacaf53\n``` \n\n(the first commit is the important one, the second one is just https://github.com/bitcoin-core/gui/issues/918#issuecomment-3682390048)",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3683871678",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3686105942,
      "node_id": "IC_kwDOEEET9c7btYNW",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3686105942",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-23T10:31:12Z",
      "updated_at": "2025-12-23T10:31:12Z",
      "author_association": "CONTRIBUTOR",
      "body": "I tried this and got a fatal crash at the first launch of the GUI.\n\nCherry-picked the commits as suggested above on latest master:\n```zsh\ncommit 23820b25bcff1701b309342ce0e154196e3b98d2 (HEAD -> master)\nAuthor: furszy <matiasfurszyfer@protonmail.com>\nDate:   Mon Dec 22 14:30:01 2025 -0500\n\n    SQUASH: GUI - not a fix. Just a check.\n\ncommit 6dceb3cb98b222f67ad1dcb53f216e143a4cc8a0\nAuthor: furszy <matiasfurszyfer@protonmail.com>\nDate:   Mon Dec 22 14:27:27 2025 -0500\n\n    wallet: decouple DB engine conf\n\ncommit d861c3820528fad2e17a45549bec70b6ba434dcc (origin/master, origin/HEAD)\nMerge: 25636500c2 217dbbbb5e\nAuthor: Ava Chow <github@achow101.com>\nDate:   Mon Dec 22 17:14:35 2025 -0800\n\n    Merge bitcoin/bitcoin#33636: wallet: Expand MuSig test coverage and follow-ups\n```\n\nUI\n<img width=\"481\" height=\"351\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ff845a8c-a11c-4454-be00-add012b4200b\" />\n\nTerminal State\n```zsh\n➜  gui-node-1 $BITCOIN_BUILD_BIN_DIR/bitcoin-qt -datadir=/tmp/gui-node-1 -conf=/tmp/gui-node-1/bitcoin-reg.conf\n\n\n************************\nEXCEPTION: St13runtime_error\nSQLiteDatabase: Failed to configure serialized threading mode: bad parameter or other API misuse\n\nbitcoin in Runaway exception\n\n```\n",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3686105942",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3687475426,
      "node_id": "IC_kwDOEEET9c7bymji",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3687475426",
      "actor": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-23T17:49:33Z",
      "updated_at": "2025-12-23T17:49:33Z",
      "author_association": "MEMBER",
      "body": "Ok, so it is not a db config ordering issue. Next check.. let's see if your sqlite build was compiled without mutexing support (`SQLITE_THREADSAFE=0`). This would also make the serialized config fail.\nPlease drop the previous changes and checkout to this [branch](https://github.com/furszy/bitcoin-core/tree/2025_wallet_decouple_db_config) (or just cherry-pick this https://github.com/furszy/bitcoin-core/commit/0f9091af31d7c9776f647fbb4590361e4b297520).\n",
      "user": {
        "login": "furszy",
        "id": 5377650,
        "node_id": "MDQ6VXNlcjUzNzc2NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5377650?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/furszy",
        "html_url": "https://github.com/furszy",
        "followers_url": "https://api.github.com/users/furszy/followers",
        "following_url": "https://api.github.com/users/furszy/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/furszy/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/furszy/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/furszy/subscriptions",
        "organizations_url": "https://api.github.com/users/furszy/orgs",
        "repos_url": "https://api.github.com/users/furszy/repos",
        "events_url": "https://api.github.com/users/furszy/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/furszy/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3687475426",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "commented",
      "id": 3689357803,
      "node_id": "IC_kwDOEEET9c7b5yHr",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/3689357803",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-24T10:21:33Z",
      "updated_at": "2025-12-24T10:21:33Z",
      "author_association": "CONTRIBUTOR",
      "body": "It didn't abort, the error behaviour remained the same. I tested with _testnet_ as well and the same error in this flow persists there too - so doesn't seem _regtest_ specific; I will update the issue title.\n\nError:\n<img width=\"482\" height=\"354\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/08f74d7c-eede-46a5-9195-fd5cbca4186a\" />\n\nCherry-picked commit on master\n```zsh\ncommit b684a62c2f47a96ee0498d53baa6481d3f1b457e (HEAD -> master)\nAuthor: furszy <matiasfurszyfer@protonmail.com>\nDate:   Tue Dec 23 12:37:43 2025 -0500\n\n    wallet: abort when sqlite was compiled with no mutex support\n\ncommit d861c3820528fad2e17a45549bec70b6ba434dcc (origin/master, origin/HEAD)\nMerge: 25636500c2 217dbbbb5e\nAuthor: Ava Chow <github@achow101.com>\nDate:   Mon Dec 22 17:14:35 2025 -0800\n\n    Merge bitcoin/bitcoin#33636: wallet: Expand MuSig test coverage and follow-ups\n```",
      "user": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/918#issuecomment-3689357803",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/918"
    },
    {
      "event": "renamed",
      "id": 21739916278,
      "node_id": "RTE_lADOEEET9c7e2Dl7zwAAAAUPzMv2",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/21739916278",
      "actor": {
        "login": "rkrux",
        "id": 5960750,
        "node_id": "MDQ6VXNlcjU5NjA3NTA=",
        "avatar_url": "https://avatars.githubusercontent.com/u/5960750?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rkrux",
        "html_url": "https://github.com/rkrux",
        "followers_url": "https://api.github.com/users/rkrux/followers",
        "following_url": "https://api.github.com/users/rkrux/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rkrux/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rkrux/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rkrux/subscriptions",
        "organizations_url": "https://api.github.com/users/rkrux/orgs",
        "repos_url": "https://api.github.com/users/rkrux/repos",
        "events_url": "https://api.github.com/users/rkrux/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rkrux/received_events",
        "type": "User",
        "site_admin": false,
        "name": null,
        "patch_url": null
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2025-12-24T10:22:51Z",
      "rename": {
        "from": "GUI crashes in regtest",
        "to": "GUI crashes on startup after creating a wallet previously"
      }
    }
  ]
}