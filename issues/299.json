{
  "type": "issue",
  "issue": {
    "id": 868218300,
    "node_id": "MDU6SXNzdWU4NjgyMTgzMDA=",
    "url": "https://api.github.com/repos/bitcoin-core/gui/issues/299",
    "repository_url": "https://api.github.com/repos/bitcoin-core/gui",
    "labels_url": "https://api.github.com/repos/bitcoin-core/gui/issues/299/labels%7B/name%7D",
    "comments_url": "https://api.github.com/repos/bitcoin-core/gui/issues/299/comments",
    "events_url": "https://api.github.com/repos/bitcoin-core/gui/issues/299/events",
    "html_url": "https://github.com/bitcoin-core/gui/issues/299",
    "number": 299,
    "state": "open",
    "state_reason": null,
    "title": "GUI unresponsive during IBD",
    "body": "I thought there was an issue raised for this already but it appears not. It's an issue in 0.21 where the GUI doesn't respond to mouse clicks until ActivateBestChain() has finished.\r\n\r\nThis is similar to #247 but it's not sticking at \"done loading\" but the main core window is freezing when blocks are being validated.",
    "user": {
      "login": "rebroad",
      "id": 1530283,
      "node_id": "MDQ6VXNlcjE1MzAyODM=",
      "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
      "gravatar_id": "",
      "url": "https://api.github.com/users/rebroad",
      "html_url": "https://github.com/rebroad",
      "followers_url": "https://api.github.com/users/rebroad/followers",
      "following_url": "https://api.github.com/users/rebroad/following%7B/other_user%7D",
      "gists_url": "https://api.github.com/users/rebroad/gists%7B/gist_id%7D",
      "starred_url": "https://api.github.com/users/rebroad/starred%7B/owner%7D%7B/repo%7D",
      "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
      "organizations_url": "https://api.github.com/users/rebroad/orgs",
      "repos_url": "https://api.github.com/users/rebroad/repos",
      "events_url": "https://api.github.com/users/rebroad/events%7B/privacy%7D",
      "received_events_url": "https://api.github.com/users/rebroad/received_events",
      "type": "User",
      "site_admin": false
    },
    "labels": [
      {
        "id": 2140649117,
        "node_id": "MDU6TGFiZWwyMTQwNjQ5MTE3",
        "url": "https://api.github.com/repos/bitcoin-core/gui/labels/Bug",
        "name": "Bug",
        "description": "Something isn't working",
        "color": "d73a4a",
        "default": false
      },
      {
        "id": 2964264316,
        "node_id": "MDU6TGFiZWwyOTY0MjY0MzE2",
        "url": "https://api.github.com/repos/bitcoin-core/gui/labels/UX",
        "name": "UX",
        "description": "All about \"how to get things done\"",
        "color": "0052cc",
        "default": false
      }
    ],
    "assignees": [],
    "author_association": "CONTRIBUTOR",
    "locked": false,
    "comments": 2,
    "created_at": "2021-04-26T21:29:37Z",
    "updated_at": "2024-01-23T14:40:51Z"
  },
  "events": [
    {
      "event": "labeled",
      "id": 4647480595,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ2NDc0ODA1OTU=",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/4647480595",
      "actor": {
        "login": "rebroad",
        "id": 1530283,
        "node_id": "MDQ6VXNlcjE1MzAyODM=",
        "avatar_url": "https://avatars.githubusercontent.com/u/1530283?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/rebroad",
        "html_url": "https://github.com/rebroad",
        "followers_url": "https://api.github.com/users/rebroad/followers",
        "following_url": "https://api.github.com/users/rebroad/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/rebroad/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/rebroad/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/rebroad/subscriptions",
        "organizations_url": "https://api.github.com/users/rebroad/orgs",
        "repos_url": "https://api.github.com/users/rebroad/repos",
        "events_url": "https://api.github.com/users/rebroad/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/rebroad/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-04-26T21:29:37Z",
      "label": {
        "name": "Bug",
        "color": "d73a4a"
      }
    },
    {
      "event": "labeled",
      "id": 4673830888,
      "node_id": "MDEyOkxhYmVsZWRFdmVudDQ2NzM4MzA4ODg=",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/events/4673830888",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-05-01T17:17:36Z",
      "label": {
        "name": "UX",
        "color": "0052cc"
      }
    },
    {
      "event": "commented",
      "id": 860076957,
      "node_id": "MDEyOklzc3VlQ29tbWVudDg2MDA3Njk1Nw==",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/860076957",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2021-06-12T16:32:31Z",
      "updated_at": "2021-06-12T16:32:31Z",
      "author_association": "MEMBER",
      "body": "> This is similar to #247 but it's not sticking at \"done loading\" but the main core window is freezing when blocks are being validated.\r\n\r\nI verified how `ActivateBestChain` affects on the GUI by inserting explicit delays before each `return` statement. No GUI unresponsiveness observed except for the case described in #247.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/299#issuecomment-860076957",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/299"
    },
    {
      "event": "cross-referenced",
      "id": null,
      "node_id": null,
      "url": null,
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-23T14:40:19Z",
      "updated_at": "2024-01-23T14:40:19Z",
      "source": {
        "issue": {
          "id": 2094976067,
          "node_id": "I_kwDOABII58583sxD",
          "url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29293",
          "repository_url": "https://api.github.com/repos/bitcoin/bitcoin",
          "labels_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29293/labels%7B/name%7D",
          "comments_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29293/comments",
          "events_url": "https://api.github.com/repos/bitcoin/bitcoin/issues/29293/events",
          "html_url": "https://github.com/bitcoin/bitcoin/issues/29293",
          "number": 29293,
          "state": "closed",
          "state_reason": "completed",
          "title": "Mac App UI is freezed most of the time, with no active peers",
          "body": "### Is there an existing issue for this?\r\n\r\n- [X] I have searched the existing issues\r\n\r\n### Current behaviour\r\n\r\nApp is not responding most of the time, mouse is spinning. It is totally unusable.\r\nAnd also there is no stable active peers - there is almost no progress for 2 weeks.\r\n\r\nSeems that \"connecting to peers\" and the beginning of \"synchronizing with network\" operation block UI thread.\r\n\r\n![btc](https://github.com/bitcoin/bitcoin/assets/2361140/3ab5f708-808f-427b-bda9-8885a82969c8)\r\n\r\nIf start loading from the beginning, progress is going but also pretty slow, and slows down with time.\r\n\r\n### Expected behaviour\r\n\r\n1. App never freezes UI and is always responsive.\r\n2. There are active working peers without the need of manually adding them.\r\n\r\n### Steps to reproduce\r\n\r\nRun the app while having 80.78% progress, on HDD.\r\n\r\n### Relevant log output\r\n\r\n![Screenshot 2024-01-23 at 03 28 56](https://github.com/bitcoin/bitcoin/assets/2361140/1e383bfe-0da4-4571-b935-d5467a518439)\r\n\r\n### How did you obtain Bitcoin Core\r\n\r\nPre-built binaries\r\n\r\n### What version of Bitcoin Core are you using?\r\n\r\nv26.0.0\r\n\r\n### Operating system and version\r\n\r\nMacOS 13.6 (22G120)\r\n\r\n### Machine specifications\r\n\r\nMacbook Air M1\r\n16Gb\r\nExternal HDD 2Tb\r\n\r\n### Advice for developers\r\n\r\nNever block threads in the app's code, it is an antipattern, especially the main thread when doing IO operations. It shows a very low level of competence.\r\n\r\n1. Use non-blocking synchronization when needed - like serial queues, instead of mutexes. Check Grand Central Dispatch (GCD) lib (not sure if it can be used in C++, or what is its analog).\r\n2. Use non-blocking apis for IO operations.",
          "user": {
            "login": "gentlee",
            "id": 2361140,
            "node_id": "MDQ6VXNlcjIzNjExNDA=",
            "avatar_url": "https://avatars.githubusercontent.com/u/2361140?v=4",
            "gravatar_id": "",
            "url": "https://api.github.com/users/gentlee",
            "html_url": "https://github.com/gentlee",
            "followers_url": "https://api.github.com/users/gentlee/followers",
            "following_url": "https://api.github.com/users/gentlee/following%7B/other_user%7D",
            "gists_url": "https://api.github.com/users/gentlee/gists%7B/gist_id%7D",
            "starred_url": "https://api.github.com/users/gentlee/starred%7B/owner%7D%7B/repo%7D",
            "subscriptions_url": "https://api.github.com/users/gentlee/subscriptions",
            "organizations_url": "https://api.github.com/users/gentlee/orgs",
            "repos_url": "https://api.github.com/users/gentlee/repos",
            "events_url": "https://api.github.com/users/gentlee/events%7B/privacy%7D",
            "received_events_url": "https://api.github.com/users/gentlee/received_events",
            "type": "User",
            "site_admin": false
          },
          "labels": [
            {
              "id": 135946,
              "node_id": "MDU6TGFiZWwxMzU5NDY=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/GUI",
              "name": "GUI",
              "color": "02d7e1",
              "default": false
            },
            {
              "id": 234879,
              "node_id": "MDU6TGFiZWwyMzQ4Nzk=",
              "url": "https://api.github.com/repos/bitcoin/bitcoin/labels/macOS",
              "name": "macOS",
              "description": "",
              "color": "660000",
              "default": false
            }
          ],
          "assignees": [],
          "author_association": "NONE",
          "locked": false,
          "comments": 4,
          "closed_at": "2024-01-23T14:40:21Z",
          "created_at": "2024-01-22T23:42:39Z",
          "updated_at": "2024-01-23T14:40:21Z"
        },
        "type": "issue"
      }
    },
    {
      "event": "commented",
      "id": 1906195387,
      "node_id": "IC_kwDOEEET9c5xnju7",
      "url": "https://api.github.com/repos/bitcoin-core/gui/issues/comments/1906195387",
      "actor": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "commit_id": null,
      "commit_url": null,
      "created_at": "2024-01-23T14:40:49Z",
      "updated_at": "2024-01-23T14:40:49Z",
      "author_association": "MEMBER",
      "body": "From https://github.com/bitcoin/bitcoin/issues/29293:\r\n\r\n> Seems that \"connecting to peers\" and the beginning of \"synchronizing with network\" operation block UI thread.",
      "user": {
        "login": "hebasto",
        "id": 32963518,
        "node_id": "MDQ6VXNlcjMyOTYzNTE4",
        "avatar_url": "https://avatars.githubusercontent.com/u/32963518?v=4",
        "gravatar_id": "",
        "url": "https://api.github.com/users/hebasto",
        "html_url": "https://github.com/hebasto",
        "followers_url": "https://api.github.com/users/hebasto/followers",
        "following_url": "https://api.github.com/users/hebasto/following%7B/other_user%7D",
        "gists_url": "https://api.github.com/users/hebasto/gists%7B/gist_id%7D",
        "starred_url": "https://api.github.com/users/hebasto/starred%7B/owner%7D%7B/repo%7D",
        "subscriptions_url": "https://api.github.com/users/hebasto/subscriptions",
        "organizations_url": "https://api.github.com/users/hebasto/orgs",
        "repos_url": "https://api.github.com/users/hebasto/repos",
        "events_url": "https://api.github.com/users/hebasto/events%7B/privacy%7D",
        "received_events_url": "https://api.github.com/users/hebasto/received_events",
        "type": "User",
        "site_admin": false
      },
      "html_url": "https://github.com/bitcoin-core/gui/issues/299#issuecomment-1906195387",
      "issue_url": "https://api.github.com/repos/bitcoin-core/gui/issues/299"
    }
  ]
}